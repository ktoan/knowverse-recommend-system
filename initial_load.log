2024-12-09 21:03:03,072 INFO:No existing model found. Starting initial training...
2024-12-09 21:03:03,072 INFO:Starting model retraining...
2024-12-09 21:03:03,127 INFO:Loaded 100002 ratings from the database.
2024-12-09 21:03:03,132 INFO:Built mappings: 1618 users, 1000 items.
2024-12-09 21:03:08,409 INFO:Epoch 1/20, Loss: 0.5113
2024-12-09 21:03:18,877 INFO:No existing model found. Starting initial training...
2024-12-09 21:03:18,877 INFO:Starting model retraining...
2024-12-09 21:03:18,932 INFO:Loaded 100002 ratings from the database.
2024-12-09 21:03:18,937 INFO:Built mappings: 1618 users, 1000 items.
2024-12-09 21:03:24,144 INFO:Epoch 1/20, Loss: 0.5110
2024-12-09 21:03:27,882 INFO:Epoch 2/20, Loss: 0.5002
2024-12-09 21:03:31,577 INFO:Epoch 3/20, Loss: 0.4872
2024-12-09 21:03:35,221 INFO:Epoch 4/20, Loss: 0.4777
2024-12-09 21:03:38,874 INFO:Epoch 5/20, Loss: 0.4730
2024-12-09 21:03:42,727 INFO:Epoch 6/20, Loss: 0.4697
2024-12-09 21:03:46,429 INFO:Epoch 7/20, Loss: 0.4669
2024-12-09 21:03:50,093 INFO:Epoch 8/20, Loss: 0.4644
2024-12-09 21:03:53,995 INFO:Epoch 9/20, Loss: 0.4619
2024-12-09 21:03:59,405 INFO:Epoch 10/20, Loss: 0.4592
2024-12-09 21:04:06,177 INFO:Epoch 11/20, Loss: 0.4570
2024-12-09 21:04:12,889 INFO:Epoch 12/20, Loss: 0.4549
2024-12-09 21:04:19,618 INFO:Epoch 13/20, Loss: 0.4524
2024-12-09 21:04:26,271 INFO:Epoch 14/20, Loss: 0.4502
2024-12-09 21:04:32,819 INFO:Epoch 15/20, Loss: 0.4482
2024-12-09 21:04:39,412 INFO:Epoch 16/20, Loss: 0.4461
2024-12-09 21:04:46,019 INFO:Epoch 17/20, Loss: 0.4444
2024-12-09 21:04:52,570 INFO:Epoch 18/20, Loss: 0.4423
2024-12-09 21:04:59,241 INFO:Epoch 19/20, Loss: 0.4408
2024-12-09 21:05:04,594 INFO:Epoch 20/20, Loss: 0.4397
2024-12-09 21:05:04,632 INFO:Model retrained and saved.
2024-12-09 21:05:04,632 INFO:User and item mappings saved successfully.
2024-12-09 21:05:04,661 INFO:Listening for new ratings on 'new_rating' channel...
2024-12-09 21:05:04,662 INFO:Listener thread started, waiting for notifications...
2024-12-09 21:05:04,667 INFO:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.22:5000
2024-12-09 21:05:04,667 INFO:[33mPress CTRL+C to quit[0m
2024-12-09 21:05:29,136 INFO:New rating detected: {'id': 101003, 'user_id': 3512, 'course_id': 562, 'rating': 4, 'created_at': '2024-12-09T13:03:03'}
2024-12-09 21:05:29,136 ERROR:Error in listen_for_changes: cannot access local variable 'NEW_RATINGS' where it is not associated with a value
2024-12-09 21:05:29,136 INFO:Database connection closed.
2024-12-09 21:07:24,864 INFO:No existing model found. Starting initial training...
2024-12-09 21:07:24,864 INFO:Starting model retraining...
2024-12-09 21:07:24,918 INFO:Loaded 100004 ratings from the database.
2024-12-09 21:07:24,923 INFO:Built mappings: 1618 users, 1000 items.
2024-12-09 21:07:24,932 INFO:Built user-rated items mapping.
2024-12-09 21:07:30,038 INFO:Epoch 1/20, Loss: 0.5073
2024-12-09 21:08:22,981 INFO:Loading existing model and mappings...
2024-12-09 21:08:22,981 INFO:User and item mappings loaded successfully.
2024-12-09 21:08:22,981 ERROR:Error loading user-rated items mappings: [Errno 2] No such file or directory: 'user_rated_items.pkl'
2024-12-09 21:08:22,988 INFO:Model loaded successfully.
2024-12-09 21:08:23,125 INFO:Listening for new ratings on 'new_rating' channel...
2024-12-09 21:08:23,125 INFO:Listener thread started, waiting for notifications...
2024-12-09 21:08:23,131 INFO:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.22:5000
2024-12-09 21:08:23,131 INFO:[33mPress CTRL+C to quit[0m
2024-12-09 21:08:55,853 INFO:New rating detected: {'id': 101005, 'user_id': 3512, 'course_id': 562, 'rating': 4, 'created_at': '2024-12-09T13:03:03'}
2024-12-09 21:10:44,835 INFO:New rating detected: {'id': 101017, 'user_id': 5941, 'course_id': 749, 'rating': 5, 'created_at': '2024-12-09T13:03:03'}
2024-12-09 21:10:54,587 INFO:New rating detected: {'id': 101018, 'user_id': 6810, 'course_id': 199, 'rating': 5, 'created_at': '2024-12-09T13:03:03'}
2024-12-09 21:11:36,387 INFO:New rating detected: {'id': 101019, 'user_id': 6810, 'course_id': 199, 'rating': 5, 'created_at': '2024-12-09T13:03:03'}
2024-12-09 21:11:37,063 INFO:New rating detected: {'id': 101020, 'user_id': 6810, 'course_id': 199, 'rating': 5, 'created_at': '2024-12-09T13:03:03'}
2024-12-09 21:11:37,371 INFO:New rating detected: {'id': 101021, 'user_id': 6810, 'course_id': 199, 'rating': 5, 'created_at': '2024-12-09T13:03:03'}
2024-12-09 21:11:37,691 INFO:New rating detected: {'id': 101022, 'user_id': 6810, 'course_id': 199, 'rating': 5, 'created_at': '2024-12-09T13:03:03'}
2024-12-09 21:11:39,951 INFO:New rating detected: {'id': 101023, 'user_id': 6810, 'course_id': 199, 'rating': 5, 'created_at': '2024-12-09T13:03:03'}
2024-12-09 21:11:40,159 INFO:New rating detected: {'id': 101024, 'user_id': 6810, 'course_id': 199, 'rating': 5, 'created_at': '2024-12-09T13:03:03'}
2024-12-09 21:11:40,371 INFO:New rating detected: {'id': 101025, 'user_id': 6810, 'course_id': 199, 'rating': 5, 'created_at': '2024-12-09T13:03:03'}
2024-12-09 21:11:40,372 INFO:Starting model retraining...
2024-12-09 21:11:40,424 INFO:Loaded 100014 ratings from the database.
2024-12-09 21:11:40,429 INFO:Built mappings: 1618 users, 1000 items.
2024-12-09 21:11:40,438 INFO:Built user-rated items mapping.
2024-12-09 21:11:45,114 INFO:Epoch 1/20, Loss: 0.5119
2024-12-09 21:11:48,461 INFO:Epoch 2/20, Loss: 0.4997
2024-12-09 21:11:52,115 INFO:Epoch 3/20, Loss: 0.4865
2024-12-09 21:11:55,479 INFO:Epoch 4/20, Loss: 0.4773
2024-12-09 21:11:59,471 INFO:Epoch 5/20, Loss: 0.4731
2024-12-09 21:12:02,763 INFO:Epoch 6/20, Loss: 0.4699
2024-12-09 21:12:06,035 INFO:Epoch 7/20, Loss: 0.4670
2024-12-09 21:12:09,365 INFO:Epoch 8/20, Loss: 0.4644
2024-12-09 21:12:12,608 INFO:Epoch 9/20, Loss: 0.4620
2024-12-09 21:12:15,832 INFO:Epoch 10/20, Loss: 0.4595
2024-12-09 21:12:19,053 INFO:Epoch 11/20, Loss: 0.4574
2024-12-09 21:12:22,273 INFO:Epoch 12/20, Loss: 0.4554
2024-12-09 21:12:25,531 INFO:Epoch 13/20, Loss: 0.4534
2024-12-09 21:12:28,840 INFO:Epoch 14/20, Loss: 0.4514
2024-12-09 21:12:32,090 INFO:Epoch 15/20, Loss: 0.4495
2024-12-09 21:12:35,365 INFO:Epoch 16/20, Loss: 0.4475
2024-12-09 21:12:38,670 INFO:Epoch 17/20, Loss: 0.4460
2024-12-09 21:12:41,916 INFO:Epoch 18/20, Loss: 0.4445
2024-12-09 21:12:45,154 INFO:Epoch 19/20, Loss: 0.4424
2024-12-09 21:12:48,433 INFO:Epoch 20/20, Loss: 0.4407
2024-12-09 21:12:48,476 INFO:Model retrained and saved.
2024-12-09 21:12:48,476 INFO:User and item mappings saved successfully.
2024-12-09 21:12:48,482 INFO:User-rated items mappings saved successfully.
2024-12-09 21:14:47,295 INFO:127.0.0.1 - - [09/Dec/2024 21:14:47] "[33mGET /recommend?user_id=2 HTTP/1.1[0m" 404 -
2024-12-09 21:14:48,911 INFO:127.0.0.1 - - [09/Dec/2024 21:14:48] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2024-12-09 21:14:50,521 INFO:127.0.0.1 - - [09/Dec/2024 21:14:50] "[33mGET /recommend?user_id=5 HTTP/1.1[0m" 404 -
2024-12-09 21:14:51,301 INFO:127.0.0.1 - - [09/Dec/2024 21:14:51] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2024-12-09 21:14:52,971 INFO:127.0.0.1 - - [09/Dec/2024 21:14:52] "[33mGET /recommend?user_id=1 HTTP/1.1[0m" 404 -
2024-12-09 21:14:53,539 INFO:127.0.0.1 - - [09/Dec/2024 21:14:53] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2024-12-09 21:15:25,393 INFO:127.0.0.1 - - [09/Dec/2024 21:15:25] "[31m[1mGET /recommend?user_id=2544\\ HTTP/1.1[0m" 400 -
2024-12-09 21:15:25,988 INFO:127.0.0.1 - - [09/Dec/2024 21:15:25] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2024-12-09 21:15:28,804 INFO:127.0.0.1 - - [09/Dec/2024 21:15:28] "GET /recommend?user_id=2544 HTTP/1.1" 200 -
2024-12-09 21:15:29,956 INFO:127.0.0.1 - - [09/Dec/2024 21:15:29] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2024-12-09 21:16:00,594 INFO:127.0.0.1 - - [09/Dec/2024 21:16:00] "[33mGET /recommend?user_id=2563 HTTP/1.1[0m" 404 -
2024-12-09 21:16:01,333 INFO:127.0.0.1 - - [09/Dec/2024 21:16:01] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2024-12-09 21:16:15,074 INFO:127.0.0.1 - - [09/Dec/2024 21:16:15] "[33mGET /recommend?user_id=2563 HTTP/1.1[0m" 404 -
2024-12-09 21:16:15,556 INFO:127.0.0.1 - - [09/Dec/2024 21:16:15] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2024-12-09 21:16:19,514 INFO:127.0.0.1 - - [09/Dec/2024 21:16:19] "GET /recommend?user_id=2728 HTTP/1.1" 200 -
2024-12-09 21:16:19,993 INFO:127.0.0.1 - - [09/Dec/2024 21:16:19] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2024-12-09 21:17:14,559 INFO:127.0.0.1 - - [09/Dec/2024 21:17:14] "[33mGET /recommend?user_id=2563 HTTP/1.1[0m" 404 -
2024-12-09 21:17:15,103 INFO:127.0.0.1 - - [09/Dec/2024 21:17:15] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2024-12-12 21:33:46,488 INFO:Loading existing model and mappings...
2024-12-12 21:33:46,488 INFO:User and item mappings loaded successfully.
2024-12-12 21:33:46,493 INFO:User-rated items mappings loaded successfully.
2024-12-12 21:33:46,529 INFO:Model loaded successfully.
2024-12-12 21:33:46,566 INFO:Listening for new ratings on 'new_rating' channel...
2024-12-12 21:33:46,567 INFO:Listener thread started, waiting for notifications...
2024-12-12 21:33:46,573 INFO:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.22:5000
2024-12-12 21:33:46,573 INFO:[33mPress CTRL+C to quit[0m
2024-12-12 21:40:16,896 INFO:127.0.0.1 - - [12/Dec/2024 21:40:16] "[33mGET /api/recommend?user_id=1 HTTP/1.1[0m" 404 -
2024-12-12 21:40:18,327 INFO:127.0.0.1 - - [12/Dec/2024 21:40:18] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2024-12-12 21:40:18,506 INFO:127.0.0.1 - - [12/Dec/2024 21:40:18] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2024-12-12 21:41:20,787 INFO:127.0.0.1 - - [12/Dec/2024 21:41:20] "GET /recommend?user_id=2544 HTTP/1.1" 200 -
2024-12-12 21:41:21,334 INFO:127.0.0.1 - - [12/Dec/2024 21:41:21] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2024-12-12 21:41:22,616 INFO:127.0.0.1 - - [12/Dec/2024 21:41:22] "[33mGET /recommend?user_id=1 HTTP/1.1[0m" 404 -
2024-12-12 21:41:23,080 INFO:127.0.0.1 - - [12/Dec/2024 21:41:23] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2024-12-12 21:41:24,821 INFO:127.0.0.1 - - [12/Dec/2024 21:41:24] "GET /recommend?user_id=2728 HTTP/1.1" 200 -
2024-12-12 21:41:25,278 INFO:127.0.0.1 - - [12/Dec/2024 21:41:25] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2024-12-12 21:49:24,832 INFO:Loading existing model and mappings...
2024-12-12 21:49:24,832 INFO:User and item mappings loaded successfully.
2024-12-12 21:49:24,837 INFO:User-rated items mappings loaded successfully.
2024-12-12 21:49:24,842 INFO:Model loaded successfully.
2024-12-12 21:49:24,868 INFO:Listening for new ratings on 'new_rating' channel...
2024-12-12 21:49:24,868 INFO:Listener thread started, waiting for notifications...
2024-12-12 21:49:24,874 INFO:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.22:5000
2024-12-12 21:49:24,874 INFO:[33mPress CTRL+C to quit[0m
2024-12-12 21:49:31,453 INFO:127.0.0.1 - - [12/Dec/2024 21:49:31] "GET /recommend?user_id=2544 HTTP/1.1" 200 -
2024-12-12 21:49:32,528 INFO:127.0.0.1 - - [12/Dec/2024 21:49:32] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2024-12-12 21:49:34,878 INFO:127.0.0.1 - - [12/Dec/2024 21:49:34] "[33mGET /recommend?user_id=1 HTTP/1.1[0m" 404 -
2024-12-12 21:49:35,558 INFO:127.0.0.1 - - [12/Dec/2024 21:49:35] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2024-12-12 21:55:55,845 INFO:Loading existing model and mappings...
2024-12-12 21:55:55,845 INFO:User and item mappings loaded successfully.
2024-12-12 21:55:55,850 INFO:User-rated items mappings loaded successfully.
2024-12-12 21:55:55,854 INFO:Model loaded successfully.
2024-12-12 21:55:55,931 INFO:Loaded 100014 ratings from the database.
2024-12-12 21:55:55,940 INFO:Top 10 items based on average ratings: [432, 144, 804, 438, 634, 868, 848, 1092, 818, 259]
2024-12-12 21:55:55,966 INFO:Listening for new ratings on 'new_rating' channel...
2024-12-12 21:55:55,966 INFO:Listener thread started, waiting for notifications...
2024-12-12 21:55:55,972 INFO:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.22:5000
2024-12-12 21:55:55,972 INFO:[33mPress CTRL+C to quit[0m
2024-12-12 21:56:06,496 INFO:User ID 1 not found. Recommending top 10 popular items.
2024-12-12 21:56:06,496 INFO:127.0.0.1 - - [12/Dec/2024 21:56:06] "GET /recommend?user_id=1 HTTP/1.1" 200 -
2024-12-12 21:56:06,861 INFO:User ID 1 not found. Recommending top 10 popular items.
2024-12-12 21:56:06,861 INFO:127.0.0.1 - - [12/Dec/2024 21:56:06] "GET /recommend?user_id=1 HTTP/1.1" 200 -
2024-12-12 21:56:07,367 INFO:127.0.0.1 - - [12/Dec/2024 21:56:07] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2024-12-12 21:56:11,808 INFO:127.0.0.1 - - [12/Dec/2024 21:56:11] "GET /recommend?user_id=2728 HTTP/1.1" 200 -
2024-12-12 21:56:12,274 INFO:127.0.0.1 - - [12/Dec/2024 21:56:12] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2024-12-12 21:56:15,205 INFO:127.0.0.1 - - [12/Dec/2024 21:56:15] "GET /recommend?user_id=2728 HTTP/1.1" 200 -
2024-12-12 21:56:15,678 INFO:127.0.0.1 - - [12/Dec/2024 21:56:15] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2024-12-12 21:56:18,886 INFO:User ID 1 not found. Recommending top 10 popular items.
2024-12-12 21:56:18,886 INFO:127.0.0.1 - - [12/Dec/2024 21:56:18] "GET /recommend?user_id=1 HTTP/1.1" 200 -
2024-12-12 21:56:19,370 INFO:127.0.0.1 - - [12/Dec/2024 21:56:19] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2024-12-12 21:56:21,456 INFO:127.0.0.1 - - [12/Dec/2024 21:56:21] "GET /recommend?user_id=2728 HTTP/1.1" 200 -
2024-12-12 21:56:21,925 INFO:127.0.0.1 - - [12/Dec/2024 21:56:21] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2024-12-12 21:56:25,206 INFO:User ID 2 not found. Recommending top 10 popular items.
2024-12-12 21:56:25,207 INFO:127.0.0.1 - - [12/Dec/2024 21:56:25] "GET /recommend?user_id=2 HTTP/1.1" 200 -
2024-12-12 21:56:25,683 INFO:127.0.0.1 - - [12/Dec/2024 21:56:25] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2024-12-12 21:57:24,626 INFO:No existing model found. Starting initial training...
2024-12-12 21:57:24,626 INFO:Starting model retraining...
2024-12-12 21:57:24,786 INFO:Loaded 100014 ratings from the database.
2024-12-12 21:57:24,811 ERROR:Error loading users from DB: column "user_id" does not exist
LINE 1: SELECT user_id FROM tbl_user;
               ^

2024-12-12 21:57:24,817 INFO:Built mappings: 1618 users, 1000 items.
2024-12-12 21:57:24,823 INFO:Built user-rated items mapping.
2024-12-12 21:57:30,522 INFO:Epoch 1/20, Loss: 0.5248, Accuracy: 0.7784, Precision: 0.1975, Recall: 0.0352, F1-Score: 0.0598, ROC AUC: 0.5010
2024-12-12 21:57:34,477 INFO:Epoch 2/20, Loss: 0.5019, Accuracy: 0.8000, Precision: 0.0000, Recall: 0.0000, F1-Score: 0.0000, ROC AUC: 0.5226
2024-12-12 21:57:38,474 INFO:Epoch 3/20, Loss: 0.4887, Accuracy: 0.8000, Precision: 0.5926, Recall: 0.0002, F1-Score: 0.0003, ROC AUC: 0.6125
2024-12-12 21:57:42,514 INFO:Epoch 4/20, Loss: 0.4797, Accuracy: 0.8004, Precision: 0.6166, Recall: 0.0052, F1-Score: 0.0103, ROC AUC: 0.6428
2024-12-12 21:57:49,508 INFO:Epoch 5/20, Loss: 0.4747, Accuracy: 0.8011, Precision: 0.5925, Recall: 0.0171, F1-Score: 0.0333, ROC AUC: 0.6563
2024-12-12 21:57:57,410 INFO:Epoch 6/20, Loss: 0.4706, Accuracy: 0.8017, Precision: 0.5860, Recall: 0.0290, F1-Score: 0.0553, ROC AUC: 0.6679
2024-12-12 21:58:05,327 INFO:Epoch 7/20, Loss: 0.4668, Accuracy: 0.8022, Precision: 0.5788, Recall: 0.0400, F1-Score: 0.0748, ROC AUC: 0.6781
2024-12-12 21:58:13,218 INFO:Epoch 8/20, Loss: 0.4636, Accuracy: 0.8028, Precision: 0.5824, Recall: 0.0502, F1-Score: 0.0925, ROC AUC: 0.6861
2024-12-12 21:58:20,984 INFO:Epoch 9/20, Loss: 0.4610, Accuracy: 0.8035, Precision: 0.5861, Recall: 0.0590, F1-Score: 0.1072, ROC AUC: 0.6926
2024-12-12 21:58:28,960 INFO:Epoch 10/20, Loss: 0.4584, Accuracy: 0.8043, Precision: 0.5917, Recall: 0.0686, F1-Score: 0.1230, ROC AUC: 0.6989
2024-12-12 21:58:35,126 INFO:Epoch 11/20, Loss: 0.4561, Accuracy: 0.8048, Precision: 0.5935, Recall: 0.0764, F1-Score: 0.1354, ROC AUC: 0.7036
2024-12-12 21:58:39,297 INFO:Epoch 12/20, Loss: 0.4538, Accuracy: 0.8048, Precision: 0.5850, Recall: 0.0832, F1-Score: 0.1457, ROC AUC: 0.7090
2024-12-12 21:58:43,661 INFO:Epoch 13/20, Loss: 0.4518, Accuracy: 0.8056, Precision: 0.5908, Recall: 0.0912, F1-Score: 0.1580, ROC AUC: 0.7135
2024-12-12 21:58:49,042 INFO:Epoch 14/20, Loss: 0.4499, Accuracy: 0.8061, Precision: 0.5924, Recall: 0.0976, F1-Score: 0.1676, ROC AUC: 0.7176
2024-12-12 21:58:57,044 INFO:Epoch 15/20, Loss: 0.4481, Accuracy: 0.8068, Precision: 0.5960, Recall: 0.1059, F1-Score: 0.1798, ROC AUC: 0.7210
2024-12-12 21:59:04,963 INFO:Epoch 16/20, Loss: 0.4460, Accuracy: 0.8073, Precision: 0.5978, Recall: 0.1123, F1-Score: 0.1891, ROC AUC: 0.7252
2024-12-12 21:59:10,676 INFO:Epoch 17/20, Loss: 0.4444, Accuracy: 0.8084, Precision: 0.6041, Recall: 0.1216, F1-Score: 0.2024, ROC AUC: 0.7284
2024-12-12 21:59:14,954 INFO:Epoch 18/20, Loss: 0.4424, Accuracy: 0.8084, Precision: 0.5993, Recall: 0.1267, F1-Score: 0.2092, ROC AUC: 0.7324
2024-12-12 21:59:19,097 INFO:Epoch 19/20, Loss: 0.4410, Accuracy: 0.8089, Precision: 0.6016, Recall: 0.1321, F1-Score: 0.2167, ROC AUC: 0.7352
2024-12-12 21:59:23,277 INFO:Epoch 20/20, Loss: 0.4399, Accuracy: 0.8092, Precision: 0.5998, Recall: 0.1384, F1-Score: 0.2249, ROC AUC: 0.7371
2024-12-12 21:59:23,277 INFO:Training completed.
2024-12-12 21:59:23,326 INFO:Model retrained and saved.
2024-12-12 21:59:23,327 INFO:User and item mappings saved successfully.
2024-12-12 21:59:23,333 INFO:User-rated items mappings saved successfully.
2024-12-12 21:59:23,342 INFO:Top 10 items based on average ratings: [432, 144, 804, 438, 634, 868, 848, 1092, 818, 259]
2024-12-12 21:59:23,479 INFO:Listening for new ratings on 'new_rating' channel...
2024-12-12 21:59:23,480 INFO:Listener thread started, waiting for notifications...
2024-12-12 21:59:23,485 INFO:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.22:5000
2024-12-12 21:59:23,485 INFO:[33mPress CTRL+C to quit[0m
2024-12-12 22:06:59,199 ERROR:Error in listen_for_changes: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

2024-12-12 22:06:59,199 INFO:Database connection closed.
2024-12-12 22:21:24,328 INFO:No existing model found. Starting initial training...
2024-12-12 22:21:24,328 INFO:Starting model retraining...
2024-12-12 22:21:24,360 INFO:Loaded 20000 ratings from the database.
2024-12-12 22:21:24,385 ERROR:Error loading users from DB: column "user_id" does not exist
LINE 1: SELECT user_id FROM tbl_user;
               ^

2024-12-12 22:21:24,386 INFO:Built mappings: 1670 users, 1000 items.
2024-12-12 22:21:24,387 INFO:Built user-rated items mapping.
2024-12-12 22:21:26,077 INFO:Epoch 1/20, Loss: 0.5253, Accuracy: 0.8000, Precision: 0.0000, Recall: 0.0000, F1-Score: 0.0000, ROC AUC: 0.5023
2024-12-12 22:21:26,957 INFO:Epoch 2/20, Loss: 0.5048, Accuracy: 0.8000, Precision: 0.0000, Recall: 0.0000, F1-Score: 0.0000, ROC AUC: 0.5183
2024-12-12 22:21:27,799 INFO:Epoch 3/20, Loss: 0.4964, Accuracy: 0.8000, Precision: 0.0000, Recall: 0.0000, F1-Score: 0.0000, ROC AUC: 0.5671
2024-12-12 22:21:28,640 INFO:Epoch 4/20, Loss: 0.4757, Accuracy: 0.8000, Precision: 0.0000, Recall: 0.0000, F1-Score: 0.0000, ROC AUC: 0.6778
2024-12-12 22:21:29,527 INFO:Epoch 5/20, Loss: 0.4455, Accuracy: 0.8021, Precision: 0.8963, Recall: 0.0121, F1-Score: 0.0239, ROC AUC: 0.7659
2024-12-12 22:21:30,370 INFO:Epoch 6/20, Loss: 0.4133, Accuracy: 0.8130, Precision: 0.8369, Recall: 0.0805, F1-Score: 0.1470, ROC AUC: 0.8114
2024-12-12 22:21:31,226 INFO:Epoch 7/20, Loss: 0.3854, Accuracy: 0.8294, Precision: 0.8008, Recall: 0.1956, F1-Score: 0.3143, ROC AUC: 0.8387
2024-12-12 22:21:32,026 INFO:Epoch 8/20, Loss: 0.3632, Accuracy: 0.8413, Precision: 0.7719, Recall: 0.2928, F1-Score: 0.4245, ROC AUC: 0.8561
2024-12-12 22:21:32,864 INFO:Epoch 9/20, Loss: 0.3438, Accuracy: 0.8511, Precision: 0.7666, Recall: 0.3672, F1-Score: 0.4966, ROC AUC: 0.8710
2024-12-12 22:21:33,745 INFO:Epoch 10/20, Loss: 0.3281, Accuracy: 0.8591, Precision: 0.7697, Recall: 0.4217, F1-Score: 0.5449, ROC AUC: 0.8831
2024-12-12 22:21:34,609 INFO:Epoch 11/20, Loss: 0.3134, Accuracy: 0.8651, Precision: 0.7691, Recall: 0.4651, F1-Score: 0.5797, ROC AUC: 0.8942
2024-12-12 22:21:35,472 INFO:Epoch 12/20, Loss: 0.3001, Accuracy: 0.8721, Precision: 0.7783, Recall: 0.5043, F1-Score: 0.6121, ROC AUC: 0.9037
2024-12-12 22:21:36,324 INFO:Epoch 13/20, Loss: 0.2885, Accuracy: 0.8785, Precision: 0.7867, Recall: 0.5384, F1-Score: 0.6393, ROC AUC: 0.9114
2024-12-12 22:21:37,198 INFO:Epoch 14/20, Loss: 0.2776, Accuracy: 0.8825, Precision: 0.7898, Recall: 0.5618, F1-Score: 0.6566, ROC AUC: 0.9187
2024-12-12 22:21:38,023 INFO:Epoch 15/20, Loss: 0.2682, Accuracy: 0.8873, Precision: 0.7949, Recall: 0.5880, F1-Score: 0.6760, ROC AUC: 0.9243
2024-12-12 22:21:38,837 INFO:Epoch 16/20, Loss: 0.2573, Accuracy: 0.8926, Precision: 0.8052, Recall: 0.6107, F1-Score: 0.6946, ROC AUC: 0.9311
2024-12-12 22:21:39,707 INFO:Epoch 17/20, Loss: 0.2502, Accuracy: 0.8947, Precision: 0.8003, Recall: 0.6311, F1-Score: 0.7057, ROC AUC: 0.9350
2024-12-12 22:21:40,582 INFO:Epoch 18/20, Loss: 0.2413, Accuracy: 0.8988, Precision: 0.8106, Recall: 0.6447, F1-Score: 0.7182, ROC AUC: 0.9400
2024-12-12 22:21:41,346 INFO:Epoch 19/20, Loss: 0.2338, Accuracy: 0.9034, Precision: 0.8167, Recall: 0.6666, F1-Score: 0.7341, ROC AUC: 0.9436
2024-12-12 22:21:42,196 INFO:Epoch 20/20, Loss: 0.2248, Accuracy: 0.9060, Precision: 0.8203, Recall: 0.6784, F1-Score: 0.7426, ROC AUC: 0.9487
2024-12-12 22:21:42,196 INFO:Training completed.
2024-12-12 22:21:42,203 INFO:Model retrained and saved.
2024-12-12 22:21:42,203 INFO:User and item mappings saved successfully.
2024-12-12 22:21:42,205 INFO:User-rated items mappings saved successfully.
2024-12-12 22:21:42,207 INFO:Top 10 items based on average ratings: [320, 174, 794, 13, 97, 46, 944, 550, 932, 776]
2024-12-12 22:21:42,234 INFO:Listening for new ratings on 'new_rating' channel...
2024-12-12 22:21:42,234 INFO:Listener thread started, waiting for notifications...
2024-12-12 22:21:42,241 INFO:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.22:5000
2024-12-12 22:21:42,241 INFO:[33mPress CTRL+C to quit[0m
2024-12-12 22:24:27,267 INFO:User ID 1 not found. Recommending top 10 popular items.
2024-12-12 22:24:27,268 INFO:127.0.0.1 - - [12/Dec/2024 22:24:27] "GET /recommend?user_id=1 HTTP/1.1" 200 -
2024-12-12 22:24:28,362 INFO:127.0.0.1 - - [12/Dec/2024 22:24:28] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2024-12-12 22:24:31,950 INFO:User ID 5812578 not found. Recommending top 10 popular items.
2024-12-12 22:24:31,951 INFO:127.0.0.1 - - [12/Dec/2024 22:24:31] "GET /recommend?user_id=5812578 HTTP/1.1" 200 -
2024-12-12 22:24:32,478 INFO:127.0.0.1 - - [12/Dec/2024 22:24:32] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2024-12-12 22:24:36,802 INFO:User ID 1 not found. Recommending top 10 popular items.
2024-12-12 22:24:36,802 INFO:127.0.0.1 - - [12/Dec/2024 22:24:36] "GET /recommend?user_id=1 HTTP/1.1" 200 -
2024-12-12 22:24:37,326 INFO:127.0.0.1 - - [12/Dec/2024 22:24:37] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2024-12-12 22:24:38,955 INFO:127.0.0.1 - - [12/Dec/2024 22:24:38] "GET /recommend?user_id=2728 HTTP/1.1" 200 -
2024-12-12 22:24:39,470 INFO:127.0.0.1 - - [12/Dec/2024 22:24:39] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2024-12-12 22:24:42,080 INFO:User ID 2 not found. Recommending top 10 popular items.
2024-12-12 22:24:42,080 INFO:127.0.0.1 - - [12/Dec/2024 22:24:42] "GET /recommend?user_id=2 HTTP/1.1" 200 -
2024-12-12 22:24:42,587 INFO:127.0.0.1 - - [12/Dec/2024 22:24:42] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2024-12-12 22:24:45,121 INFO:User ID 3 not found. Recommending top 10 popular items.
2024-12-12 22:24:45,121 INFO:127.0.0.1 - - [12/Dec/2024 22:24:45] "GET /recommend?user_id=3 HTTP/1.1" 200 -
2024-12-12 22:24:45,632 INFO:127.0.0.1 - - [12/Dec/2024 22:24:45] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2024-12-12 22:34:18,576 INFO:Loading existing model and mappings...
2024-12-12 22:34:18,576 INFO:User and item mappings loaded successfully.
2024-12-12 22:34:18,578 INFO:User-rated items mappings loaded successfully.
2024-12-12 22:34:18,583 INFO:Model loaded successfully.
2024-12-12 22:34:18,620 INFO:Loaded 20000 ratings from the database.
2024-12-12 22:34:18,623 INFO:Top 10 items based on average ratings: [320, 174, 794, 13, 97, 46, 944, 550, 932, 776]
2024-12-12 22:34:18,649 INFO:Listening for new ratings on 'new_rating' channel...
2024-12-12 22:34:18,650 INFO:Listener thread started, waiting for notifications...
2024-12-12 22:34:18,656 INFO:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.22:5000
2024-12-12 22:34:18,656 INFO:[33mPress CTRL+C to quit[0m
2024-12-12 22:34:21,258 INFO:User ID 5812578 not found. Recommending top 10 popular items.
2024-12-12 22:34:21,258 INFO:127.0.0.1 - - [12/Dec/2024 22:34:21] "GET /recommend?user_id=5812578 HTTP/1.1" 200 -
2024-12-12 22:34:22,000 INFO:User ID 5812578 not found. Recommending top 10 popular items.
2024-12-12 22:34:22,001 INFO:127.0.0.1 - - [12/Dec/2024 22:34:22] "GET /recommend?user_id=5812578 HTTP/1.1" 200 -
2024-12-12 22:34:22,797 INFO:127.0.0.1 - - [12/Dec/2024 22:34:22] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2024-12-12 22:34:23,807 INFO:User ID 1 not found. Recommending top 10 popular items.
2024-12-12 22:34:23,807 INFO:127.0.0.1 - - [12/Dec/2024 22:34:23] "GET /recommend?user_id=1 HTTP/1.1" 200 -
2024-12-12 22:34:24,366 INFO:127.0.0.1 - - [12/Dec/2024 22:34:24] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2024-12-12 22:34:31,643 INFO:127.0.0.1 - - [12/Dec/2024 22:34:31] "OPTIONS /recommend?user_id=1 HTTP/1.1" 200 -
2024-12-12 22:34:35,503 INFO:127.0.0.1 - - [12/Dec/2024 22:34:35] "OPTIONS /recommend?user_id=1 HTTP/1.1" 200 -
2024-12-12 22:35:05,373 INFO:127.0.0.1 - - [12/Dec/2024 22:35:05] "GET /recommend?user_id=2728 HTTP/1.1" 200 -
2024-12-12 22:35:06,541 INFO:127.0.0.1 - - [12/Dec/2024 22:35:06] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2024-12-12 22:36:18,412 INFO:Loading existing model and mappings...
2024-12-12 22:36:18,412 INFO:User and item mappings loaded successfully.
2024-12-12 22:36:18,414 INFO:User-rated items mappings loaded successfully.
2024-12-12 22:36:18,417 INFO:Model loaded successfully.
2024-12-12 22:36:18,557 INFO:Loaded 20000 ratings from the database.
2024-12-12 22:36:18,560 INFO:Top 10 items based on average ratings: [320, 174, 794, 13, 97, 46, 944, 550, 932, 776]
2024-12-12 22:36:18,587 INFO:Listening for new ratings on 'new_rating' channel...
2024-12-12 22:36:18,588 INFO:Listener thread started, waiting for notifications...
2024-12-12 22:36:18,594 INFO:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.22:5000
2024-12-12 22:36:18,594 INFO:[33mPress CTRL+C to quit[0m
2024-12-12 22:36:28,229 INFO:User ID 1 not found. Recommending top 10 popular items.
2024-12-12 22:36:28,230 INFO:127.0.0.1 - - [12/Dec/2024 22:36:28] "GET /recommend?user_id=1 HTTP/1.1" 200 -
2024-12-12 22:36:28,842 INFO:127.0.0.1 - - [12/Dec/2024 22:36:28] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2024-12-12 22:36:30,819 INFO:127.0.0.1 - - [12/Dec/2024 22:36:30] "OPTIONS /recommend?user_id=1 HTTP/1.1" 200 -
2024-12-12 22:36:34,640 INFO:127.0.0.1 - - [12/Dec/2024 22:36:34] "OPTIONS /recommend?user_id=1 HTTP/1.1" 200 -
2024-12-12 22:41:50,965 INFO:Loading existing model and mappings...
2024-12-12 22:41:50,966 INFO:User and item mappings loaded successfully.
2024-12-12 22:41:50,967 INFO:User-rated items mappings loaded successfully.
2024-12-12 22:41:50,971 INFO:Model loaded successfully.
2024-12-12 22:41:51,118 INFO:Loaded 20001 ratings from the database.
2024-12-12 22:41:51,120 INFO:Top 10 items based on average ratings: [320, 174, 794, 13, 97, 46, 944, 550, 932, 776]
2024-12-12 22:41:51,147 INFO:Listening for new ratings on 'new_rating' channel...
2024-12-12 22:41:51,147 INFO:Listener thread started, waiting for notifications...
2024-12-12 22:41:51,153 INFO:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.22:5000
2024-12-12 22:41:51,153 INFO:[33mPress CTRL+C to quit[0m
2024-12-12 22:42:20,846 INFO:Loading existing model and mappings...
2024-12-12 22:42:20,846 INFO:User and item mappings loaded successfully.
2024-12-12 22:42:20,848 INFO:User-rated items mappings loaded successfully.
2024-12-12 22:42:20,853 INFO:Model loaded successfully.
2024-12-12 22:42:20,888 INFO:Loaded 20002 ratings from the database.
2024-12-12 22:42:20,890 INFO:Top 10 items based on average ratings: [320, 174, 794, 13, 97, 46, 944, 550, 932, 776]
2024-12-12 22:42:21,020 INFO:Listening for new ratings on 'new_rating' channel...
2024-12-12 22:42:21,021 INFO:Listener thread started, waiting for notifications...
2024-12-12 22:42:21,026 INFO:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.22:5000
2024-12-12 22:42:21,026 INFO:[33mPress CTRL+C to quit[0m
2024-12-12 22:42:33,465 INFO:New rating detected: 20003
2024-12-12 22:42:40,364 INFO:New rating detected: 20004
2024-12-12 22:42:40,881 INFO:New rating detected: 20005
2024-12-12 22:42:41,208 INFO:New rating detected: 20006
2024-12-12 22:42:41,496 INFO:New rating detected: 20007
2024-12-12 22:42:41,807 INFO:New rating detected: 20008
2024-12-12 22:42:43,352 INFO:New rating detected: 20009
2024-12-12 22:42:43,648 INFO:New rating detected: 20010
2024-12-12 22:42:43,964 INFO:New rating detected: 20011
2024-12-12 22:42:44,308 INFO:New rating detected: 20012
2024-12-12 22:42:44,309 INFO:Starting model retraining...
2024-12-12 22:42:44,347 INFO:Loaded 20012 ratings from the database.
2024-12-12 22:42:44,375 ERROR:Error loading users from DB: column "user_id" does not exist
LINE 1: SELECT user_id FROM tbl_user;
               ^

2024-12-12 22:42:44,376 INFO:Built mappings: 1670 users, 1000 items.
2024-12-12 22:42:44,378 INFO:Built user-rated items mapping.
2024-12-12 22:42:46,269 INFO:Epoch 1/20, Loss: 0.5279, Accuracy: 0.8000, Precision: 0.4000, Recall: 0.0001, F1-Score: 0.0002, ROC AUC: 0.5005
2024-12-12 22:42:47,210 INFO:Epoch 2/20, Loss: 0.5066, Accuracy: 0.8000, Precision: 0.0000, Recall: 0.0000, F1-Score: 0.0000, ROC AUC: 0.5104
2024-12-12 22:42:48,128 INFO:Epoch 3/20, Loss: 0.4967, Accuracy: 0.8000, Precision: 0.0000, Recall: 0.0000, F1-Score: 0.0000, ROC AUC: 0.5657
2024-12-12 22:42:48,990 INFO:Epoch 4/20, Loss: 0.4752, Accuracy: 0.8001, Precision: 1.0000, Recall: 0.0005, F1-Score: 0.0010, ROC AUC: 0.6754
2024-12-12 22:42:49,850 INFO:Epoch 5/20, Loss: 0.4446, Accuracy: 0.8023, Precision: 0.8997, Recall: 0.0130, F1-Score: 0.0256, ROC AUC: 0.7640
2024-12-12 22:42:50,770 INFO:Epoch 6/20, Loss: 0.4134, Accuracy: 0.8146, Precision: 0.8489, Recall: 0.0887, F1-Score: 0.1606, ROC AUC: 0.8091
2024-12-12 22:42:51,651 INFO:Epoch 7/20, Loss: 0.3872, Accuracy: 0.8294, Precision: 0.8062, Recall: 0.1938, F1-Score: 0.3125, ROC AUC: 0.8346
2024-12-12 22:42:52,538 INFO:Epoch 8/20, Loss: 0.3659, Accuracy: 0.8416, Precision: 0.7795, Recall: 0.2903, F1-Score: 0.4230, ROC AUC: 0.8524
2024-12-12 22:42:53,436 INFO:Epoch 9/20, Loss: 0.3483, Accuracy: 0.8510, Precision: 0.7701, Recall: 0.3637, F1-Score: 0.4940, ROC AUC: 0.8659
2024-12-12 22:42:54,317 INFO:Epoch 10/20, Loss: 0.3329, Accuracy: 0.8584, Precision: 0.7655, Recall: 0.4206, F1-Score: 0.5429, ROC AUC: 0.8782
2024-12-12 22:42:55,240 INFO:Epoch 11/20, Loss: 0.3196, Accuracy: 0.8648, Precision: 0.7687, Recall: 0.4638, F1-Score: 0.5785, ROC AUC: 0.8880
2024-12-12 22:42:56,179 INFO:Epoch 12/20, Loss: 0.3065, Accuracy: 0.8698, Precision: 0.7695, Recall: 0.4986, F1-Score: 0.6051, ROC AUC: 0.8978
2024-12-12 22:42:57,137 INFO:Epoch 13/20, Loss: 0.2936, Accuracy: 0.8760, Precision: 0.7785, Recall: 0.5312, F1-Score: 0.6315, ROC AUC: 0.9072
2024-12-12 22:42:58,029 INFO:Epoch 14/20, Loss: 0.2830, Accuracy: 0.8816, Precision: 0.7840, Recall: 0.5634, F1-Score: 0.6556, ROC AUC: 0.9143
2024-12-12 22:42:58,920 INFO:Epoch 15/20, Loss: 0.2722, Accuracy: 0.8862, Precision: 0.7892, Recall: 0.5878, F1-Score: 0.6738, ROC AUC: 0.9215
2024-12-12 22:42:59,794 INFO:Epoch 16/20, Loss: 0.2642, Accuracy: 0.8903, Precision: 0.7968, Recall: 0.6059, F1-Score: 0.6884, ROC AUC: 0.9262
2024-12-12 22:43:00,678 INFO:Epoch 17/20, Loss: 0.2545, Accuracy: 0.8943, Precision: 0.8012, Recall: 0.6270, F1-Score: 0.7035, ROC AUC: 0.9321
2024-12-12 22:43:01,572 INFO:Epoch 18/20, Loss: 0.2458, Accuracy: 0.8976, Precision: 0.8049, Recall: 0.6441, F1-Score: 0.7155, ROC AUC: 0.9372
2024-12-12 22:43:02,453 INFO:Epoch 19/20, Loss: 0.2388, Accuracy: 0.9007, Precision: 0.8076, Recall: 0.6608, F1-Score: 0.7269, ROC AUC: 0.9408
2024-12-12 22:43:03,371 INFO:Epoch 20/20, Loss: 0.2309, Accuracy: 0.9044, Precision: 0.8151, Recall: 0.6751, F1-Score: 0.7386, ROC AUC: 0.9451
2024-12-12 22:43:03,371 INFO:Training completed.
2024-12-12 22:43:03,385 INFO:Model retrained and saved.
2024-12-12 22:43:03,387 INFO:User and item mappings saved successfully.
2024-12-12 22:43:03,388 INFO:User-rated items mappings saved successfully.
2024-12-12 22:43:03,390 INFO:Top 10 items based on average ratings: [320, 174, 532, 794, 13, 97, 46, 944, 550, 932]
2024-12-12 22:43:30,078 INFO:127.0.0.1 - - [12/Dec/2024 22:43:30] "OPTIONS /recommend?user_id=1 HTTP/1.1" 200 -
2024-12-12 22:43:36,051 INFO:127.0.0.1 - - [12/Dec/2024 22:43:36] "OPTIONS /recommend?user_id=1 HTTP/1.1" 200 -
2024-12-12 22:43:39,708 INFO:127.0.0.1 - - [12/Dec/2024 22:43:39] "OPTIONS /recommend?user_id=1 HTTP/1.1" 200 -
2024-12-12 22:44:33,773 INFO:Loading existing model and mappings...
2024-12-12 22:44:33,787 INFO:User and item mappings loaded successfully.
2024-12-12 22:44:33,794 INFO:User-rated items mappings loaded successfully.
2024-12-12 22:44:33,798 INFO:Model loaded successfully.
2024-12-12 22:44:33,835 INFO:Loaded 20012 ratings from the database.
2024-12-12 22:44:33,838 INFO:Top 10 items based on average ratings: [320, 174, 532, 794, 13, 97, 46, 944, 550, 932]
2024-12-12 22:44:33,864 INFO:Listening for new ratings on 'new_rating' channel...
2024-12-12 22:44:33,865 INFO:Listener thread started, waiting for notifications...
2024-12-12 22:44:33,872 INFO:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.22:5000
2024-12-12 22:44:33,872 INFO:[33mPress CTRL+C to quit[0m
2024-12-12 22:44:34,666 INFO:127.0.0.1 - - [12/Dec/2024 22:44:34] "OPTIONS /recommend?user_id=1 HTTP/1.1" 200 -
2024-12-12 22:44:34,977 INFO:User ID 1 not found. Recommending top 10 popular items.
2024-12-12 22:44:34,977 INFO:127.0.0.1 - - [12/Dec/2024 22:44:34] "GET /recommend?user_id=1 HTTP/1.1" 200 -
2024-12-12 22:44:37,799 INFO:User ID 1 not found. Recommending top 10 popular items.
2024-12-12 22:44:37,800 INFO:127.0.0.1 - - [12/Dec/2024 22:44:37] "GET /recommend?user_id=1 HTTP/1.1" 200 -
2024-12-12 22:45:49,452 INFO:127.0.0.1 - - [12/Dec/2024 22:45:49] "OPTIONS /recommend?user_id=1 HTTP/1.1" 200 -
2024-12-12 22:45:49,476 INFO:127.0.0.1 - - [12/Dec/2024 22:45:49] "OPTIONS /recommend?user_id=1 HTTP/1.1" 200 -
2024-12-12 22:45:49,755 INFO:User ID 1 not found. Recommending top 10 popular items.
2024-12-12 22:45:49,757 INFO:127.0.0.1 - - [12/Dec/2024 22:45:49] "GET /recommend?user_id=1 HTTP/1.1" 200 -
2024-12-12 22:45:50,005 INFO:User ID 1 not found. Recommending top 10 popular items.
2024-12-12 22:45:50,005 INFO:127.0.0.1 - - [12/Dec/2024 22:45:50] "GET /recommend?user_id=1 HTTP/1.1" 200 -
2024-12-12 22:46:27,570 INFO:127.0.0.1 - - [12/Dec/2024 22:46:27] "OPTIONS /recommend?user_id=1 HTTP/1.1" 200 -
2024-12-12 22:46:27,571 INFO:User ID 1 not found. Recommending top 10 popular items.
2024-12-12 22:46:27,571 INFO:127.0.0.1 - - [12/Dec/2024 22:46:27] "GET /recommend?user_id=1 HTTP/1.1" 200 -
2024-12-12 22:46:31,187 INFO:User ID 1 not found. Recommending top 10 popular items.
2024-12-12 22:46:31,187 INFO:127.0.0.1 - - [12/Dec/2024 22:46:31] "GET /recommend?user_id=1 HTTP/1.1" 200 -
2024-12-12 22:47:52,671 INFO:127.0.0.1 - - [12/Dec/2024 22:47:52] "GET /recommend?user_id=5 HTTP/1.1" 200 -
2024-12-12 22:47:53,772 INFO:127.0.0.1 - - [12/Dec/2024 22:47:53] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2024-12-12 22:47:55,598 INFO:User ID 645 not found. Recommending top 10 popular items.
2024-12-12 22:47:55,599 INFO:127.0.0.1 - - [12/Dec/2024 22:47:55] "GET /recommend?user_id=645 HTTP/1.1" 200 -
2024-12-12 22:47:56,205 INFO:127.0.0.1 - - [12/Dec/2024 22:47:56] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2024-12-12 22:48:51,070 INFO:Loading existing model and mappings...
2024-12-12 22:48:51,070 INFO:User and item mappings loaded successfully.
2024-12-12 22:48:51,072 INFO:User-rated items mappings loaded successfully.
2024-12-12 22:48:51,076 INFO:Model loaded successfully.
2024-12-12 22:48:51,113 INFO:Loaded 20012 ratings from the database.
2024-12-12 22:48:51,115 INFO:Top 10 items based on average ratings: [320, 174, 532, 794, 13, 97, 46, 944, 550, 932]
2024-12-12 22:48:51,140 INFO:Listening for new ratings on 'new_rating' channel...
2024-12-12 22:48:51,141 INFO:Listener thread started, waiting for notifications...
2024-12-12 22:48:51,146 INFO:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.22:5000
2024-12-12 22:48:51,146 INFO:[33mPress CTRL+C to quit[0m
2024-12-18 21:31:27,004 INFO:generated new fontManager
2024-12-18 21:31:27,151 INFO:No existing model found. Starting initial training...
2024-12-18 21:31:27,152 INFO:Starting model retraining...
2024-12-18 21:31:27,231 INFO:Loaded 20012 ratings from the database.
2024-12-18 21:31:27,262 ERROR:Error loading users from DB: column "user_id" does not exist
LINE 1: SELECT user_id FROM tbl_user;
               ^

2024-12-18 21:31:27,264 INFO:Built mappings: 1670 users, 1000 items.
2024-12-18 21:31:27,265 INFO:Built user-rated items mapping.
2024-12-18 21:31:29,182 INFO:Epoch 1/20, Loss: 0.5488, Accuracy: 0.7820, Precision: 0.1932, Recall: 0.0284, F1-Score: 0.0495, ROC AUC: 0.4985
2024-12-18 21:31:29,929 INFO:Epoch 2/20, Loss: 0.5099, Accuracy: 0.8000, Precision: 0.0000, Recall: 0.0000, F1-Score: 0.0000, ROC AUC: 0.5135
2024-12-18 21:31:30,687 INFO:Epoch 3/20, Loss: 0.5005, Accuracy: 0.8000, Precision: 0.0000, Recall: 0.0000, F1-Score: 0.0000, ROC AUC: 0.5515
2024-12-18 21:31:31,437 INFO:Epoch 4/20, Loss: 0.4808, Accuracy: 0.8001, Precision: 1.0000, Recall: 0.0005, F1-Score: 0.0011, ROC AUC: 0.6511
2024-12-18 21:31:32,165 INFO:Epoch 5/20, Loss: 0.4520, Accuracy: 0.8013, Precision: 0.8376, Recall: 0.0082, F1-Score: 0.0163, ROC AUC: 0.7504
2024-12-18 21:31:32,865 INFO:Epoch 6/20, Loss: 0.4229, Accuracy: 0.8091, Precision: 0.8192, Recall: 0.0584, F1-Score: 0.1091, ROC AUC: 0.8015
2024-12-18 21:31:33,566 INFO:Epoch 7/20, Loss: 0.3989, Accuracy: 0.8224, Precision: 0.7911, Recall: 0.1523, F1-Score: 0.2554, ROC AUC: 0.8241
2024-12-18 21:31:34,293 INFO:Epoch 8/20, Loss: 0.3806, Accuracy: 0.8329, Precision: 0.7608, Recall: 0.2399, F1-Score: 0.3647, ROC AUC: 0.8382
2024-12-18 21:31:34,974 INFO:Epoch 9/20, Loss: 0.3642, Accuracy: 0.8427, Precision: 0.7591, Recall: 0.3131, F1-Score: 0.4433, ROC AUC: 0.8515
2024-12-18 21:31:35,644 INFO:Epoch 10/20, Loss: 0.3494, Accuracy: 0.8496, Precision: 0.7532, Recall: 0.3691, F1-Score: 0.4954, ROC AUC: 0.8630
2024-12-18 21:31:36,320 INFO:Epoch 11/20, Loss: 0.3362, Accuracy: 0.8561, Precision: 0.7552, Recall: 0.4151, F1-Score: 0.5357, ROC AUC: 0.8737
2024-12-18 21:31:36,983 INFO:Epoch 12/20, Loss: 0.3235, Accuracy: 0.8624, Precision: 0.7588, Recall: 0.4576, F1-Score: 0.5709, ROC AUC: 0.8838
2024-12-18 21:31:37,667 INFO:Epoch 13/20, Loss: 0.3117, Accuracy: 0.8682, Precision: 0.7650, Recall: 0.4920, F1-Score: 0.5989, ROC AUC: 0.8929
2024-12-18 21:31:38,356 INFO:Epoch 14/20, Loss: 0.3004, Accuracy: 0.8737, Precision: 0.7729, Recall: 0.5215, F1-Score: 0.6228, ROC AUC: 0.9013
2024-12-18 21:31:39,036 INFO:Epoch 15/20, Loss: 0.2896, Accuracy: 0.8782, Precision: 0.7770, Recall: 0.5486, F1-Score: 0.6431, ROC AUC: 0.9092
2024-12-18 21:31:39,708 INFO:Epoch 16/20, Loss: 0.2788, Accuracy: 0.8846, Precision: 0.7909, Recall: 0.5753, F1-Score: 0.6661, ROC AUC: 0.9163
2024-12-18 21:31:40,381 INFO:Epoch 17/20, Loss: 0.2694, Accuracy: 0.8892, Precision: 0.7963, Recall: 0.5990, F1-Score: 0.6837, ROC AUC: 0.9221
2024-12-18 21:31:41,034 INFO:Epoch 18/20, Loss: 0.2588, Accuracy: 0.8924, Precision: 0.7987, Recall: 0.6180, F1-Score: 0.6968, ROC AUC: 0.9293
2024-12-18 21:31:41,687 INFO:Epoch 19/20, Loss: 0.2514, Accuracy: 0.8962, Precision: 0.8027, Recall: 0.6375, F1-Score: 0.7107, ROC AUC: 0.9333
2024-12-18 21:31:42,355 INFO:Epoch 20/20, Loss: 0.2437, Accuracy: 0.9004, Precision: 0.8106, Recall: 0.6548, F1-Score: 0.7244, ROC AUC: 0.9376
2024-12-18 21:31:42,356 INFO:Training completed.
2024-12-18 21:33:10,095 INFO:No existing model found. Starting initial training...
2024-12-18 21:33:10,095 INFO:Starting model retraining...
2024-12-18 21:33:10,238 INFO:Loaded 20012 ratings from the database.
2024-12-18 21:33:10,262 ERROR:Error loading users from DB: column "user_id" does not exist
LINE 1: SELECT user_id FROM tbl_user;
               ^

2024-12-18 21:33:10,264 INFO:Built mappings: 1670 users, 1000 items.
2024-12-18 21:33:10,265 INFO:Built user-rated items mapping.
2024-12-18 21:33:11,636 INFO:Epoch 1/20, Loss: 0.5285, Accuracy: 0.8000, Precision: 0.0000, Recall: 0.0000, F1-Score: 0.0000, ROC AUC: 0.4958
2024-12-18 21:33:12,359 INFO:Epoch 2/20, Loss: 0.5059, Accuracy: 0.8000, Precision: 0.0000, Recall: 0.0000, F1-Score: 0.0000, ROC AUC: 0.5178
2024-12-18 21:33:13,131 INFO:Epoch 3/20, Loss: 0.4977, Accuracy: 0.8000, Precision: 0.0000, Recall: 0.0000, F1-Score: 0.0000, ROC AUC: 0.5600
2024-12-18 21:33:13,902 INFO:Epoch 4/20, Loss: 0.4776, Accuracy: 0.8001, Precision: 0.9091, Recall: 0.0005, F1-Score: 0.0010, ROC AUC: 0.6670
2024-12-18 21:33:14,572 INFO:Epoch 5/20, Loss: 0.4484, Accuracy: 0.8017, Precision: 0.8813, Recall: 0.0096, F1-Score: 0.0191, ROC AUC: 0.7593
2024-12-18 21:33:15,253 INFO:Epoch 6/20, Loss: 0.4172, Accuracy: 0.8114, Precision: 0.8203, Recall: 0.0728, F1-Score: 0.1337, ROC AUC: 0.8073
2024-12-18 21:33:15,946 INFO:Epoch 7/20, Loss: 0.3914, Accuracy: 0.8253, Precision: 0.7840, Recall: 0.1748, F1-Score: 0.2859, ROC AUC: 0.8315
2024-12-18 21:33:16,667 INFO:Epoch 8/20, Loss: 0.3693, Accuracy: 0.8375, Precision: 0.7710, Recall: 0.2670, F1-Score: 0.3967, ROC AUC: 0.8506
2024-12-18 21:33:17,367 INFO:Epoch 9/20, Loss: 0.3513, Accuracy: 0.8471, Precision: 0.7638, Recall: 0.3409, F1-Score: 0.4714, ROC AUC: 0.8647
2024-12-18 21:33:18,094 INFO:Epoch 10/20, Loss: 0.3348, Accuracy: 0.8551, Precision: 0.7622, Recall: 0.4005, F1-Score: 0.5251, ROC AUC: 0.8775
2024-12-18 21:33:18,783 INFO:Epoch 11/20, Loss: 0.3203, Accuracy: 0.8623, Precision: 0.7662, Recall: 0.4484, F1-Score: 0.5657, ROC AUC: 0.8886
2024-12-18 21:33:19,484 INFO:Epoch 12/20, Loss: 0.3049, Accuracy: 0.8699, Precision: 0.7762, Recall: 0.4912, F1-Score: 0.6016, ROC AUC: 0.9003
2024-12-18 21:33:20,188 INFO:Epoch 13/20, Loss: 0.2940, Accuracy: 0.8745, Precision: 0.7767, Recall: 0.5225, F1-Score: 0.6247, ROC AUC: 0.9076
2024-12-18 21:33:20,873 INFO:Epoch 14/20, Loss: 0.2820, Accuracy: 0.8801, Precision: 0.7830, Recall: 0.5538, F1-Score: 0.6487, ROC AUC: 0.9159
2024-12-18 21:33:21,602 INFO:Epoch 15/20, Loss: 0.2708, Accuracy: 0.8850, Precision: 0.7901, Recall: 0.5786, F1-Score: 0.6680, ROC AUC: 0.9231
2024-12-18 21:33:22,328 INFO:Epoch 16/20, Loss: 0.2598, Accuracy: 0.8900, Precision: 0.7971, Recall: 0.6036, F1-Score: 0.6870, ROC AUC: 0.9296
2024-12-18 21:33:23,043 INFO:Epoch 17/20, Loss: 0.2507, Accuracy: 0.8944, Precision: 0.8037, Recall: 0.6246, F1-Score: 0.7029, ROC AUC: 0.9348
2024-12-18 21:33:23,732 INFO:Epoch 18/20, Loss: 0.2422, Accuracy: 0.8987, Precision: 0.8097, Recall: 0.6449, F1-Score: 0.7179, ROC AUC: 0.9393
2024-12-18 21:33:24,407 INFO:Epoch 19/20, Loss: 0.2348, Accuracy: 0.9019, Precision: 0.8103, Recall: 0.6654, F1-Score: 0.7307, ROC AUC: 0.9434
2024-12-18 21:33:25,169 INFO:Epoch 20/20, Loss: 0.2268, Accuracy: 0.9057, Precision: 0.8185, Recall: 0.6788, F1-Score: 0.7422, ROC AUC: 0.9476
2024-12-18 21:33:25,169 INFO:Training completed.
2024-12-18 21:33:56,916 INFO:No existing model found. Starting initial training...
2024-12-18 21:33:56,917 INFO:Starting model retraining...
2024-12-18 21:33:56,955 INFO:Loaded 20012 ratings from the database.
2024-12-18 21:33:56,980 ERROR:Error loading users from DB: column "user_id" does not exist
LINE 1: SELECT user_id FROM tbl_user;
               ^

2024-12-18 21:33:56,980 INFO:Built mappings: 1670 users, 1000 items.
2024-12-18 21:33:56,982 INFO:Built user-rated items mapping.
2024-12-18 21:33:58,423 INFO:Epoch 1/20, Loss: 0.5469, Accuracy: 0.7857, Precision: 0.1874, Recall: 0.0214, F1-Score: 0.0384, ROC AUC: 0.4955
2024-12-18 21:33:59,166 INFO:Epoch 2/20, Loss: 0.5106, Accuracy: 0.8000, Precision: 0.0000, Recall: 0.0000, F1-Score: 0.0000, ROC AUC: 0.5132
2024-12-18 21:33:59,942 INFO:Epoch 3/20, Loss: 0.4997, Accuracy: 0.8000, Precision: 0.0000, Recall: 0.0000, F1-Score: 0.0000, ROC AUC: 0.5545
2024-12-18 21:34:00,675 INFO:Epoch 4/20, Loss: 0.4787, Accuracy: 0.8002, Precision: 1.0000, Recall: 0.0010, F1-Score: 0.0020, ROC AUC: 0.6566
2024-12-18 21:34:01,368 INFO:Epoch 5/20, Loss: 0.4506, Accuracy: 0.8023, Precision: 0.8402, Recall: 0.0142, F1-Score: 0.0279, ROC AUC: 0.7491
2024-12-18 21:34:02,059 INFO:Epoch 6/20, Loss: 0.4218, Accuracy: 0.8123, Precision: 0.8196, Recall: 0.0788, F1-Score: 0.1437, ROC AUC: 0.7975
2024-12-18 21:34:02,753 INFO:Epoch 7/20, Loss: 0.3977, Accuracy: 0.8245, Precision: 0.7877, Recall: 0.1676, F1-Score: 0.2765, ROC AUC: 0.8233
2024-12-18 21:34:03,469 INFO:Epoch 8/20, Loss: 0.3783, Accuracy: 0.8352, Precision: 0.7693, Recall: 0.2512, F1-Score: 0.3788, ROC AUC: 0.8398
2024-12-18 21:34:04,173 INFO:Epoch 9/20, Loss: 0.3618, Accuracy: 0.8442, Precision: 0.7628, Recall: 0.3210, F1-Score: 0.4518, ROC AUC: 0.8528
2024-12-18 21:34:04,870 INFO:Epoch 10/20, Loss: 0.3457, Accuracy: 0.8519, Precision: 0.7596, Recall: 0.3795, F1-Score: 0.5061, ROC AUC: 0.8662
2024-12-18 21:34:05,555 INFO:Epoch 11/20, Loss: 0.3322, Accuracy: 0.8575, Precision: 0.7546, Recall: 0.4262, F1-Score: 0.5447, ROC AUC: 0.8773
2024-12-18 21:34:06,228 INFO:Epoch 12/20, Loss: 0.3179, Accuracy: 0.8650, Precision: 0.7656, Recall: 0.4687, F1-Score: 0.5814, ROC AUC: 0.8884
2024-12-18 21:34:06,910 INFO:Epoch 13/20, Loss: 0.3056, Accuracy: 0.8711, Precision: 0.7705, Recall: 0.5059, F1-Score: 0.6108, ROC AUC: 0.8978
2024-12-18 21:34:07,588 INFO:Epoch 14/20, Loss: 0.2949, Accuracy: 0.8759, Precision: 0.7773, Recall: 0.5316, F1-Score: 0.6314, ROC AUC: 0.9052
2024-12-18 21:34:08,244 INFO:Epoch 15/20, Loss: 0.2823, Accuracy: 0.8817, Precision: 0.7844, Recall: 0.5633, F1-Score: 0.6557, ROC AUC: 0.9144
2024-12-18 21:34:08,959 INFO:Epoch 16/20, Loss: 0.2740, Accuracy: 0.8859, Precision: 0.7891, Recall: 0.5863, F1-Score: 0.6728, ROC AUC: 0.9193
2024-12-18 21:34:09,620 INFO:Epoch 17/20, Loss: 0.2645, Accuracy: 0.8902, Precision: 0.7953, Recall: 0.6070, F1-Score: 0.6885, ROC AUC: 0.9255
2024-12-18 21:34:10,304 INFO:Epoch 18/20, Loss: 0.2548, Accuracy: 0.8943, Precision: 0.8008, Recall: 0.6276, F1-Score: 0.7037, ROC AUC: 0.9313
2024-12-18 21:34:11,007 INFO:Epoch 19/20, Loss: 0.2475, Accuracy: 0.8980, Precision: 0.8066, Recall: 0.6448, F1-Score: 0.7167, ROC AUC: 0.9354
2024-12-18 21:34:11,702 INFO:Epoch 20/20, Loss: 0.2375, Accuracy: 0.9014, Precision: 0.8078, Recall: 0.6656, F1-Score: 0.7298, ROC AUC: 0.9413
2024-12-18 21:34:11,702 INFO:Training completed.
2024-12-18 21:34:42,696 INFO:No existing model found. Starting initial training...
2024-12-18 21:34:42,696 INFO:Starting model retraining...
2024-12-18 21:34:42,730 INFO:Loaded 20012 ratings from the database.
2024-12-18 21:34:42,756 ERROR:Error loading users from DB: column "user_id" does not exist
LINE 1: SELECT user_id FROM tbl_user;
               ^

2024-12-18 21:34:42,757 INFO:Built mappings: 1670 users, 1000 items.
2024-12-18 21:34:42,759 INFO:Built user-rated items mapping.
2024-12-18 21:34:44,098 INFO:Epoch 1/20, Loss: 0.5296, Accuracy: 0.7990, Precision: 0.1560, Recall: 0.0011, F1-Score: 0.0022, ROC AUC: 0.4986
2024-12-18 21:34:44,762 INFO:Epoch 2/20, Loss: 0.5077, Accuracy: 0.8000, Precision: 0.0000, Recall: 0.0000, F1-Score: 0.0000, ROC AUC: 0.5152
2024-12-18 21:34:45,454 INFO:Epoch 3/20, Loss: 0.4978, Accuracy: 0.8000, Precision: 0.0000, Recall: 0.0000, F1-Score: 0.0000, ROC AUC: 0.5609
2024-12-18 21:34:46,169 INFO:Epoch 4/20, Loss: 0.4771, Accuracy: 0.8001, Precision: 0.9167, Recall: 0.0005, F1-Score: 0.0011, ROC AUC: 0.6693
2024-12-18 21:34:46,883 INFO:Epoch 5/20, Loss: 0.4458, Accuracy: 0.8022, Precision: 0.8925, Recall: 0.0124, F1-Score: 0.0245, ROC AUC: 0.7651
2024-12-18 21:34:47,606 INFO:Epoch 6/20, Loss: 0.4139, Accuracy: 0.8132, Precision: 0.8148, Recall: 0.0855, F1-Score: 0.1548, ROC AUC: 0.8098
2024-12-18 21:34:48,313 INFO:Epoch 7/20, Loss: 0.3859, Accuracy: 0.8299, Precision: 0.7983, Recall: 0.2003, F1-Score: 0.3203, ROC AUC: 0.8361
2024-12-18 21:34:49,026 INFO:Epoch 8/20, Loss: 0.3642, Accuracy: 0.8418, Precision: 0.7761, Recall: 0.2936, F1-Score: 0.4260, ROC AUC: 0.8544
2024-12-18 21:34:49,804 INFO:Epoch 9/20, Loss: 0.3461, Accuracy: 0.8516, Precision: 0.7679, Recall: 0.3700, F1-Score: 0.4994, ROC AUC: 0.8685
2024-12-18 21:34:50,517 INFO:Epoch 10/20, Loss: 0.3307, Accuracy: 0.8592, Precision: 0.7661, Recall: 0.4261, F1-Score: 0.5476, ROC AUC: 0.8801
2024-12-18 21:34:51,227 INFO:Epoch 11/20, Loss: 0.3170, Accuracy: 0.8652, Precision: 0.7658, Recall: 0.4697, F1-Score: 0.5823, ROC AUC: 0.8906
2024-12-18 21:34:51,904 INFO:Epoch 12/20, Loss: 0.3045, Accuracy: 0.8712, Precision: 0.7709, Recall: 0.5067, F1-Score: 0.6115, ROC AUC: 0.8997
2024-12-18 21:34:52,595 INFO:Epoch 13/20, Loss: 0.2924, Accuracy: 0.8771, Precision: 0.7776, Recall: 0.5396, F1-Score: 0.6371, ROC AUC: 0.9081
2024-12-18 21:34:53,297 INFO:Epoch 14/20, Loss: 0.2805, Accuracy: 0.8831, Precision: 0.7894, Recall: 0.5667, F1-Score: 0.6597, ROC AUC: 0.9161
2024-12-18 21:34:54,013 INFO:Epoch 15/20, Loss: 0.2701, Accuracy: 0.8879, Precision: 0.7924, Recall: 0.5958, F1-Score: 0.6802, ROC AUC: 0.9225
2024-12-18 21:34:55,083 INFO:Epoch 16/20, Loss: 0.2596, Accuracy: 0.8922, Precision: 0.7974, Recall: 0.6180, F1-Score: 0.6963, ROC AUC: 0.9292
2024-12-18 21:34:56,573 INFO:Epoch 17/20, Loss: 0.2522, Accuracy: 0.8956, Precision: 0.8024, Recall: 0.6340, F1-Score: 0.7083, ROC AUC: 0.9335
2024-12-18 21:34:58,113 INFO:Epoch 18/20, Loss: 0.2406, Accuracy: 0.9005, Precision: 0.8096, Recall: 0.6572, F1-Score: 0.7255, ROC AUC: 0.9402
2024-12-18 21:34:59,662 INFO:Epoch 19/20, Loss: 0.2330, Accuracy: 0.9041, Precision: 0.8138, Recall: 0.6748, F1-Score: 0.7379, ROC AUC: 0.9440
2024-12-18 21:35:01,149 INFO:Epoch 20/20, Loss: 0.2248, Accuracy: 0.9090, Precision: 0.8215, Recall: 0.6964, F1-Score: 0.7538, ROC AUC: 0.9482
2024-12-18 21:35:01,149 INFO:Training completed.
2024-12-18 21:37:00,389 INFO:No existing model found. Starting initial training...
2024-12-18 21:37:00,389 INFO:Starting model retraining...
2024-12-18 21:37:00,419 INFO:Loaded 20012 ratings from the database.
2024-12-18 21:37:00,442 ERROR:Error loading users from DB: column "user_id" does not exist
LINE 1: SELECT user_id FROM tbl_user;
               ^

2024-12-18 21:37:00,444 INFO:Built mappings: 1670 users, 1000 items.
2024-12-18 21:37:00,448 INFO:Built user-rated items mapping.
2024-12-18 21:37:01,895 INFO:Epoch 1/20, Loss: 0.5300, Accuracy: 0.8000, Precision: 0.0000, Recall: 0.0000, F1-Score: 0.0000, ROC AUC: 0.4973
2024-12-18 21:37:02,578 INFO:Epoch 2/20, Loss: 0.5061, Accuracy: 0.8000, Precision: 0.0000, Recall: 0.0000, F1-Score: 0.0000, ROC AUC: 0.5137
2024-12-18 21:37:03,296 INFO:Epoch 3/20, Loss: 0.4969, Accuracy: 0.8000, Precision: 0.0000, Recall: 0.0000, F1-Score: 0.0000, ROC AUC: 0.5648
2024-12-18 21:37:04,006 INFO:Epoch 4/20, Loss: 0.4764, Accuracy: 0.8001, Precision: 0.9286, Recall: 0.0006, F1-Score: 0.0013, ROC AUC: 0.6729
2024-12-18 21:37:04,725 INFO:Epoch 5/20, Loss: 0.4478, Accuracy: 0.8016, Precision: 0.8727, Recall: 0.0096, F1-Score: 0.0190, ROC AUC: 0.7651
2024-12-18 21:37:05,415 INFO:Epoch 6/20, Loss: 0.4184, Accuracy: 0.8111, Precision: 0.8301, Recall: 0.0696, F1-Score: 0.1284, ROC AUC: 0.8091
2024-12-18 21:37:06,114 INFO:Epoch 7/20, Loss: 0.3941, Accuracy: 0.8250, Precision: 0.8021, Recall: 0.1659, F1-Score: 0.2749, ROC AUC: 0.8303
2024-12-18 21:37:06,783 INFO:Epoch 8/20, Loss: 0.3744, Accuracy: 0.8363, Precision: 0.7790, Recall: 0.2533, F1-Score: 0.3824, ROC AUC: 0.8449
2024-12-18 21:37:07,454 INFO:Epoch 9/20, Loss: 0.3578, Accuracy: 0.8450, Precision: 0.7678, Recall: 0.3228, F1-Score: 0.4545, ROC AUC: 0.8575
2024-12-18 21:37:08,106 INFO:Epoch 10/20, Loss: 0.3429, Accuracy: 0.8518, Precision: 0.7566, Recall: 0.3820, F1-Score: 0.5077, ROC AUC: 0.8697
2024-12-18 21:37:08,803 INFO:Epoch 11/20, Loss: 0.3289, Accuracy: 0.8580, Precision: 0.7567, Recall: 0.4276, F1-Score: 0.5465, ROC AUC: 0.8809
2024-12-18 21:37:09,513 INFO:Epoch 12/20, Loss: 0.3158, Accuracy: 0.8640, Precision: 0.7580, Recall: 0.4700, F1-Score: 0.5802, ROC AUC: 0.8909
2024-12-18 21:37:10,178 INFO:Epoch 13/20, Loss: 0.3025, Accuracy: 0.8702, Precision: 0.7673, Recall: 0.5040, F1-Score: 0.6084, ROC AUC: 0.9010
2024-12-18 21:37:10,850 INFO:Epoch 14/20, Loss: 0.2922, Accuracy: 0.8755, Precision: 0.7737, Recall: 0.5333, F1-Score: 0.6314, ROC AUC: 0.9082
2024-12-18 21:37:11,558 INFO:Epoch 15/20, Loss: 0.2796, Accuracy: 0.8818, Precision: 0.7852, Recall: 0.5629, F1-Score: 0.6557, ROC AUC: 0.9169
2024-12-18 21:37:12,279 INFO:Epoch 16/20, Loss: 0.2697, Accuracy: 0.8853, Precision: 0.7883, Recall: 0.5829, F1-Score: 0.6702, ROC AUC: 0.9235
2024-12-18 21:37:13,006 INFO:Epoch 17/20, Loss: 0.2596, Accuracy: 0.8907, Precision: 0.7949, Recall: 0.6113, F1-Score: 0.6911, ROC AUC: 0.9294
2024-12-18 21:37:13,708 INFO:Epoch 18/20, Loss: 0.2496, Accuracy: 0.8957, Precision: 0.8059, Recall: 0.6303, F1-Score: 0.7074, ROC AUC: 0.9353
2024-12-18 21:37:14,399 INFO:Epoch 19/20, Loss: 0.2415, Accuracy: 0.8995, Precision: 0.8087, Recall: 0.6518, F1-Score: 0.7218, ROC AUC: 0.9398
2024-12-18 21:37:15,106 INFO:Epoch 20/20, Loss: 0.2325, Accuracy: 0.9036, Precision: 0.8155, Recall: 0.6694, F1-Score: 0.7353, ROC AUC: 0.9447
2024-12-18 21:37:15,106 INFO:Training completed.
2024-12-18 21:38:42,065 INFO:No existing model found. Starting initial training...
2024-12-18 21:38:42,066 INFO:Starting model retraining...
2024-12-18 21:38:42,098 INFO:Loaded 20012 ratings from the database.
2024-12-18 21:38:42,121 ERROR:Error loading users from DB: column "user_id" does not exist
LINE 1: SELECT user_id FROM tbl_user;
               ^

2024-12-18 21:38:42,123 INFO:Built mappings: 1670 users, 1000 items.
2024-12-18 21:38:42,124 INFO:Built user-rated items mapping.
2024-12-18 21:38:43,458 INFO:Epoch 1/20, Loss: 0.5168, Accuracy: 0.8000, Precision: 0.0000, Recall: 0.0000, F1-Score: 0.0000, ROC AUC: 0.4985
2024-12-18 21:38:44,152 INFO:Epoch 2/20, Loss: 0.5068, Accuracy: 0.8000, Precision: 0.0000, Recall: 0.0000, F1-Score: 0.0000, ROC AUC: 0.5112
2024-12-18 21:38:44,856 INFO:Epoch 3/20, Loss: 0.4967, Accuracy: 0.8000, Precision: 1.0000, Recall: 0.0001, F1-Score: 0.0002, ROC AUC: 0.5663
2024-12-18 21:38:45,530 INFO:Epoch 4/20, Loss: 0.4736, Accuracy: 0.8002, Precision: 1.0000, Recall: 0.0008, F1-Score: 0.0017, ROC AUC: 0.6774
2024-12-18 21:38:46,219 INFO:Epoch 5/20, Loss: 0.4414, Accuracy: 0.8030, Precision: 0.9003, Recall: 0.0167, F1-Score: 0.0328, ROC AUC: 0.7671
2024-12-18 21:38:46,883 INFO:Epoch 6/20, Loss: 0.4087, Accuracy: 0.8154, Precision: 0.8429, Recall: 0.0946, F1-Score: 0.1702, ROC AUC: 0.8148
2024-12-18 21:38:47,544 INFO:Epoch 7/20, Loss: 0.3803, Accuracy: 0.8315, Precision: 0.8061, Recall: 0.2071, F1-Score: 0.3295, ROC AUC: 0.8426
2024-12-18 21:38:48,227 INFO:Epoch 8/20, Loss: 0.3579, Accuracy: 0.8440, Precision: 0.7886, Recall: 0.3004, F1-Score: 0.4350, ROC AUC: 0.8614
2024-12-18 21:38:48,880 INFO:Epoch 9/20, Loss: 0.3402, Accuracy: 0.8532, Precision: 0.7783, Recall: 0.3720, F1-Score: 0.5034, ROC AUC: 0.8744
2024-12-18 21:38:49,537 INFO:Epoch 10/20, Loss: 0.3232, Accuracy: 0.8614, Precision: 0.7796, Recall: 0.4281, F1-Score: 0.5527, ROC AUC: 0.8873
2024-12-18 21:38:50,200 INFO:Epoch 11/20, Loss: 0.3101, Accuracy: 0.8666, Precision: 0.7717, Recall: 0.4730, F1-Score: 0.5865, ROC AUC: 0.8969
2024-12-18 21:38:50,868 INFO:Epoch 12/20, Loss: 0.2981, Accuracy: 0.8725, Precision: 0.7771, Recall: 0.5083, F1-Score: 0.6146, ROC AUC: 0.9050
2024-12-18 21:38:51,554 INFO:Epoch 13/20, Loss: 0.2866, Accuracy: 0.8782, Precision: 0.7851, Recall: 0.5383, F1-Score: 0.6387, ROC AUC: 0.9127
2024-12-18 21:38:52,252 INFO:Epoch 14/20, Loss: 0.2751, Accuracy: 0.8834, Precision: 0.7900, Recall: 0.5683, F1-Score: 0.6610, ROC AUC: 0.9203
2024-12-18 21:38:52,949 INFO:Epoch 15/20, Loss: 0.2666, Accuracy: 0.8871, Precision: 0.7913, Recall: 0.5918, F1-Score: 0.6772, ROC AUC: 0.9255
2024-12-18 21:38:53,621 INFO:Epoch 16/20, Loss: 0.2569, Accuracy: 0.8910, Precision: 0.7971, Recall: 0.6103, F1-Score: 0.6913, ROC AUC: 0.9313
2024-12-18 21:38:54,286 INFO:Epoch 17/20, Loss: 0.2495, Accuracy: 0.8946, Precision: 0.8012, Recall: 0.6293, F1-Score: 0.7049, ROC AUC: 0.9355
2024-12-18 21:38:55,013 INFO:Epoch 18/20, Loss: 0.2417, Accuracy: 0.8984, Precision: 0.8044, Recall: 0.6499, F1-Score: 0.7189, ROC AUC: 0.9397
2024-12-18 21:38:55,704 INFO:Epoch 19/20, Loss: 0.2327, Accuracy: 0.9027, Precision: 0.8127, Recall: 0.6671, F1-Score: 0.7328, ROC AUC: 0.9447
2024-12-18 21:38:56,473 INFO:Epoch 20/20, Loss: 0.2261, Accuracy: 0.9058, Precision: 0.8178, Recall: 0.6805, F1-Score: 0.7429, ROC AUC: 0.9481
2024-12-18 21:38:56,473 INFO:Training completed.
2024-12-18 21:38:56,836 INFO:Model retrained and saved.
2024-12-18 21:38:56,837 INFO:User and item mappings saved successfully.
2024-12-18 21:38:56,838 INFO:User-rated items mappings saved successfully.
2024-12-18 21:38:56,841 INFO:Top 10 items based on average ratings: [320, 174, 532, 794, 13, 97, 46, 944, 550, 932]
2024-12-18 21:38:56,869 INFO:Listening for new ratings on 'new_rating' channel...
2024-12-18 21:38:56,869 INFO:Listener thread started, waiting for notifications...
2024-12-18 21:38:56,877 INFO:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.22:5000
2024-12-18 21:38:56,877 INFO:[33mPress CTRL+C to quit[0m
2024-12-18 21:42:23,348 INFO:Loading existing model and mappings...
2024-12-18 21:42:23,350 INFO:User and item mappings loaded successfully.
2024-12-18 21:42:23,351 INFO:User-rated items mappings loaded successfully.
2024-12-18 21:42:23,360 INFO:Model loaded successfully.
2024-12-18 21:42:23,392 INFO:Loaded 20012 ratings from the database.
2024-12-18 21:42:23,394 INFO:Top 10 items based on average ratings: [320, 174, 532, 794, 13, 97, 46, 944, 550, 932]
2024-12-18 21:42:23,418 INFO:Listening for new ratings on 'new_rating' channel...
2024-12-18 21:42:23,418 INFO:Listener thread started, waiting for notifications...
2024-12-18 21:42:23,423 INFO:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.22:5000
2024-12-18 21:42:23,423 INFO:[33mPress CTRL+C to quit[0m
